{"ast":null,"code":"import _regeneratorRuntime from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useEffect,useRef,useState}from'react';import{Zoom}from'react-reveal';import styled from'styled-components';import{colors}from'../../styles';import Container from'../Container';import Testimonials from'../testimonials/Testimonials';import Title from'../Title';import axios from'axios';import Details from'./Details';import Description from'./Description';import Gallery from'./Gallery';import Form from'./Form';import Spinner from'../../components/Spinner';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Box=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  min-height: 300px;\\n  padding: 50px 0;\\n  background-color: \",\";\\n  position: relative;\\n\"])),colors().grey);var MainBox=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 40px 0;\\n\"])));function Training(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),training=_useState2[0],setTraining=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),gallery=_useState4[0],setGallery=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),display=_useState6[0],setDisplay=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),formOffset=_useState8[0],setFormOffset=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isMounted=_useState10[0],setIsMounted=_useState10[1];var ref=useRef();useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var trainings,imgs;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios('/api/trainings');case 2:trainings=_context.sent;_context.next=5;return axios('/api/gallery');case 5:imgs=_context.sent;setTraining(trainings.data.data.training[0]);setGallery(imgs.data.data.gallery);setDisplay(imgs.data.data.gallery[0].display);setIsMounted(true);case 10:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();setTimeout(function(){ref.current&&window.scrollTo({top:ref.current.offsetTop,behavior:'smooth'});},300);},[]);var getFromOffset=function getFromOffset(offset){console.log(offset);setFormOffset(offset);};// const handleSubmit = async (e) => {\n//   e.preventDefault();\n//   setIsLoading(true);\n//   const stripeResp = await axios('/api/kup-szkolenie');\n//   console.log(stripeResp.data);\n//   const id = await stripeResp.data.id;\n//   const stripe = await stripePromise;\n//   const { error } = await stripe.redirectToCheckout({\n//     sessionId: id,\n//   });\n//   console.log(`error: ${error}`);\n// };\nreturn/*#__PURE__*/_jsxs(Box,{ref:ref,children:[/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Zoom,{children:[/*#__PURE__*/_jsx(Title,{text:\"Szkolenia\",size:38,after:true}),' ']}),/*#__PURE__*/_jsxs(MainBox,{children:[isMounted?/*#__PURE__*/_jsx(Zoom,{children:/*#__PURE__*/_jsx(Details,{training:training})}):/*#__PURE__*/_jsx(Spinner,{}),isMounted?/*#__PURE__*/_jsx(Zoom,{children:/*#__PURE__*/_jsx(Description,{training:training,formOffset:formOffset})}):/*#__PURE__*/_jsx(Spinner,{}),display?isMounted?/*#__PURE__*/_jsx(Gallery,{gallery:gallery}):/*#__PURE__*/_jsx(Spinner,{}):null,/*#__PURE__*/_jsx(Zoom,{children:/*#__PURE__*/_jsx(Form,{getFromOffset:getFromOffset// handleSubmit={handleSubmit}\n})})]})]}),isMounted&&/*#__PURE__*/_jsx(Testimonials,{})]});}export default Training;","map":{"version":3,"sources":["/home/olakoziou/Pulpit/Code/krzys2/frontend/src/components/training/Training.js"],"names":["React","useEffect","useRef","useState","Zoom","styled","colors","Container","Testimonials","Title","axios","Details","Description","Gallery","Form","Spinner","Box","div","grey","MainBox","Training","training","setTraining","gallery","setGallery","display","setDisplay","formOffset","setFormOffset","isMounted","setIsMounted","ref","fetchData","trainings","imgs","data","setTimeout","current","window","scrollTo","top","offsetTop","behavior","getFromOffset","offset","console","log"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Zoom } from 'react-reveal';\nimport styled from 'styled-components';\nimport { colors } from '../../styles';\nimport Container from '../Container';\nimport Testimonials from '../testimonials/Testimonials';\nimport Title from '../Title';\nimport axios from 'axios';\nimport Details from './Details';\nimport Description from './Description';\nimport Gallery from './Gallery';\nimport Form from './Form';\nimport Spinner from '../../components/Spinner';\n\nconst Box = styled.div`\n  min-height: 300px;\n  padding: 50px 0;\n  background-color: ${colors().grey};\n  position: relative;\n`;\n\nconst MainBox = styled.div`\n  padding: 40px 0;\n`;\n\nfunction Training() {\n  const [training, setTraining] = useState([]);\n  const [gallery, setGallery] = useState([]);\n  const [display, setDisplay] = useState(null);\n\n  const [formOffset, setFormOffset] = useState();\n  const [isMounted, setIsMounted] = useState(false);\n  const ref = useRef();\n\n  useEffect(() => {\n    async function fetchData() {\n      const trainings = await axios('/api/trainings');\n      const imgs = await axios('/api/gallery');\n\n      setTraining(trainings.data.data.training[0]);\n      setGallery(imgs.data.data.gallery);\n      setDisplay(imgs.data.data.gallery[0].display);\n      setIsMounted(true);\n    }\n    fetchData();\n\n    setTimeout(() => {\n      ref.current &&\n        window.scrollTo({ top: ref.current.offsetTop, behavior: 'smooth' });\n    }, 300);\n  }, []);\n\n  const getFromOffset = (offset) => {\n    console.log(offset);\n    setFormOffset(offset);\n  };\n\n  // const handleSubmit = async (e) => {\n  //   e.preventDefault();\n  //   setIsLoading(true);\n  //   const stripeResp = await axios('/api/kup-szkolenie');\n  //   console.log(stripeResp.data);\n  //   const id = await stripeResp.data.id;\n  //   const stripe = await stripePromise;\n  //   const { error } = await stripe.redirectToCheckout({\n  //     sessionId: id,\n  //   });\n\n  //   console.log(`error: ${error}`);\n  // };\n\n  return (\n    <Box ref={ref}>\n      <Container>\n        <Zoom>\n          <Title text=\"Szkolenia\" size={38} after={true} />{' '}\n        </Zoom>\n        <MainBox>\n          {isMounted ? (\n            <Zoom>\n              <Details training={training} />\n            </Zoom>\n          ) : (\n            <Spinner />\n          )}\n          {isMounted ? (\n            <Zoom>\n              <Description training={training} formOffset={formOffset} />\n            </Zoom>\n          ) : (\n            <Spinner />\n          )}\n          {display ? (\n            isMounted ? (\n              <Gallery gallery={gallery} />\n            ) : (\n              <Spinner />\n            )\n          ) : null}\n          <Zoom>\n            <Form\n              getFromOffset={getFromOffset}\n              // handleSubmit={handleSubmit}\n            />\n          </Zoom>\n        </MainBox>\n      </Container>\n      {isMounted && <Testimonials />}\n    </Box>\n  );\n}\n\nexport default Training;\n"]},"metadata":{},"sourceType":"module"}
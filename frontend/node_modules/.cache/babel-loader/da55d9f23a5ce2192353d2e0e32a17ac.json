{"ast":null,"code":"import _regeneratorRuntime from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/olakoziou/Pulpit/Code/krzys2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6;import axios from'axios';import React,{useEffect,useRef,useState}from'react';import{Link}from'react-router-dom';import styled from'styled-components';import Spinner from'../Spinner';import{breakpoints,colors}from'../../styles';import Title from'../Title';import{loadStripe}from'@stripe/stripe-js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var stripePromise=loadStripe(process.env.REACT_APP_STRIPE_PUBLIC);var Box=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 50px 0 30px;\\n\"])));var FormContainer=styled.form(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 90%;\\n  margin: 0 auto;\\n  padding: 30px 0;\\n  max-width: 300px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n\\n  @media \",\" {\\n    max-width: 350px;\\n  }\\n\\n  @media \",\" {\\n    max-width: 450px;\\n  }\\n\\n  > div:last-of-type {\\n    width: 100%;\\n    max-width: 300px;\\n    margin: 30px auto 0;\\n    input[type='submit'] {\\n      outline: none;\\n      border: none;\\n      width: 100%;\\n\\n      background-color: \",\";\\n      color: \",\";\\n      font-size: 26px;\\n      font-weight: 700;\\n      text-align: center;\\n      text-transform: uppercase;\\n      padding: 15px;\\n      border-radius: 12px;\\n      box-shadow: 0 0 12px -5px \",\";\\n      cursor: pointer;\\n      transition: all 0.2s;\\n\\n      @media (hover: hover) {\\n        &:not(:disabled):hover {\\n          transform: scale(1.03);\\n          box-shadow: 0 0 15px -5px \",\";\\n        }\\n      }\\n\\n      &:disabled {\\n        background-color: \",\";\\n        cursor: unset;\\n      }\\n    }\\n  }\\n\"])),breakpoints().sm,breakpoints().md,colors().violet,colors().grey,colors().navy1,colors().navy1,colors(0.5).darkGrey);var Switch=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  padding: 10px 0;\\n\\n  > span {\\n    display: inline-block;\\n    max-width: 30%;\\n    color: \",\";\\n    i {\\n      opacity: \",\";\\n      color: \",\";\\n      transition: all 0.2s;\\n    }\\n  }\\n  label {\\n    position: relative;\\n    display: inline-block;\\n    width: 60px;\\n    height: 34px;\\n    margin-right: 5px;\\n    input {\\n      opacity: 0;\\n      width: 0;\\n      height: 0;\\n    }\\n\\n    span {\\n      position: absolute;\\n      cursor: pointer;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      border-radius: 34px;\\n      background-color: #ccc;\\n      -webkit-transition: 0.4s;\\n      transition: 0.4s;\\n\\n      &::before {\\n        position: absolute;\\n        content: '';\\n        height: 26px;\\n        width: 26px;\\n        left: 4px;\\n        bottom: 4px;\\n        background-color: \",\";\\n        transform: \",\";\\n        border-radius: 50%;\\n        -webkit-transition: 0.4s;\\n        transition: 0.4s;\\n      }\\n    }\\n  }\\n\"])),colors().navy1,function(props){return props.toggle?'1':'0';},colors().orange,function(props){return props.toggle?\"\".concat(colors().orange):\"\".concat(colors().violet);},function(props){return props.toggle?'translateX(26px)':'translateX(0)';});var Input=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin: 20px 0;\\n  height: 50px;\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  input {\\n    height: 100%;\\n    width: 100%;\\n    background-color: transparent;\\n    border-bottom: 1px solid \",\";\\n    outline: none;\\n\\n    :focus,\\n    :valid {\\n      border-bottom: 2px solid \",\";\\n    }\\n\\n    :focus + label {\\n      top: 5%;\\n      font-size: 12px;\\n      /* transition: all 0.5s; */\\n    }\\n    :valid + label {\\n      top: 5%;\\n      font-size: 12px;\\n    }\\n\\n    :valid ~ i {\\n      transform: scale(1);\\n    }\\n  }\\n\\n  i {\\n    transform: scale(0);\\n    color: \",\";\\n    transition: all 0.2s;\\n  }\\n\\n  label {\\n    position: absolute;\\n    left: 0;\\n    top: 50%;\\n    transform: translateY(-50%);\\n    transition: all 0.3s;\\n  }\\n\\n  i {\\n    position: absolute;\\n    right: 0;\\n  }\\n\"])),colors().navy2,colors().orange,colors().orange);var Privacy=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  > input {\\n    margin-right: 5px;\\n  }\\n\"])));var SpinnerBtn=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  color: \",\";\\n  font-size: 26px;\\n  font-weight: 700;\\n  text-align: center;\\n  text-transform: uppercase;\\n  padding: 15px;\\n  border-radius: 12px;\\n  box-shadow: 0 0 12px -5px \",\";\\n  cursor: pointer;\\n\"])),colors().violet,colors().grey,colors().navy1);var validEmailRegex=RegExp(// eslint-disable-next-line\n/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);function Form(_ref){var getFromOffset=_ref.getFromOffset,isMounted=_ref.isMounted;var _useState=useState({name:'',address1:'',address2:'',address3:'',email:'',nip:'',company:'',errors:{name:'',address1:'Minimum 8 znaków',address2:'Minimum 6 znaków',address3:'Minimum 3 znaki',email:'Nieprawidłowy email',nip:'Minimum 8 znaków',company:'Minimum 3 znaki'}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),toggle=_useState4[0],setToggle=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),privacy=_useState6[0],setPrivacy=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),disabled=_useState8[0],setDisabled=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoading=_useState10[0],setIsLoading=_useState10[1];// const [hasChanged, setHasChanged] = useState(false);\nvar ref=useRef();useEffect(function(){getFromOffset(ref.current);},[getFromOffset]);var handleChange=function handleChange(e){setState(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});// setHasChanged(true);\nvar _e$target=e.target,name=_e$target.name,value=_e$target.value;var errors=state.errors;switch(name){case'name':errors.name=value.length<5?'Minimum 5 znaków':'';break;case'company':errors.company=value.length<3?'Minimum 3 znaki':'';break;case'email':errors.email=validEmailRegex.test(value)?'':'Nieprawidłowy email';break;case'address1':errors.address1=value.length<8?'Minimum 8 znaków':'';break;case'address2':errors.address2=value.length<5?'Minimum 5 znaków':'';break;case'address3':errors.address3=value.length<3?'Minimum 3 znaki':'';break;case'nip':errors.nip=value.length<8?'Minimum 8 znaków':'';break;default:break;}if(validateForm(state.errors)){setDisabled(false);}else{setDisabled(true);}};var validateForm=function validateForm(errors){var valid=true;Object.values(errors).forEach(function(val){return val.length>0&&(valid=false);})&&Object.values(state).slice(-1).forEach(function(val){return val.length>0&&(valid=false);});return valid;};var toggleSwitch=function toggleSwitch(e){setToggle(function(prev){return!prev;});setState({name:'',address1:'',address2:'',address3:'',email:'',nip:'',company:'',errors:{name:'',address1:'',address2:'',address3:'',email:'',nip:'',company:''}});};var acceptPrivacy=function acceptPrivacy(e){setPrivacy(function(prev){return!prev;});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setIsLoading(true);data=state;delete data.errors;_context2.next=6;return axios.all([axios.post(\"\".concat(process.env.REACT_APP_DOMAIN,\"/api/send-email\"),{data:data}),axios.get('/api/kup-szkolenie').then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var id,stripe,_yield$stripe$redirec,errorStripe;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return data.data.id;case 2:id=_context.sent;_context.next=5;return stripePromise;case 5:stripe=_context.sent;_context.next=8;return stripe.redirectToCheckout({sessionId:id});case 8:_yield$stripe$redirec=_context.sent;errorStripe=_yield$stripe$redirec.errorStripe;console.log(errorStripe);case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref3.apply(this,arguments);};}())]);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Box,{ref:ref,children:[/*#__PURE__*/_jsx(Title,{text:\"Dane kontaktowe\"}),/*#__PURE__*/_jsxs(FormContainer,{onSubmit:handleSubmit// action=\"/api/kup-szkolenie\"\n// method=\"POST\"\n,children:[/*#__PURE__*/_jsxs(Switch,{toggle:toggle,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"switch\",id:\"switch\",onChange:toggleSwitch,checked:toggle}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Firma \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]})]}),toggle?/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company\",id:\"company\",value:state.company,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"company\",children:\"Nazwa firmy\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}):/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",value:state.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Imi\\u0119 i nazwisko\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}),/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",value:state.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}),/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address1\",id:\"address1\",value:state.address1,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address1\",children:\"Ulica, nr budynku / nr lokalu\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}),/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address2\",id:\"address2\",value:state.address2,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address2\",children:\"Kod poczowy\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}),/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address3\",id:\"address3\",value:state.address3,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address3\",children:\"Miejscowo\\u015B\\u0107\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}),toggle?/*#__PURE__*/_jsxs(Input,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"nip\",id:\"nip\",value:state.nip,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nip\",children:\"NIP\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-check\"})]}):null,/*#__PURE__*/_jsxs(Privacy,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"check\",checked:privacy,onChange:acceptPrivacy,required:true}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"check\",children:[' ',\"Kupuj\\u0105c szkolenie wyra\\u017Cam zgod\\u0119 na przetwarzanie moich danych osobowych.Zasady przetwarzania danych osobowych znajdziesz w\",' ',/*#__PURE__*/_jsx(Link,{to:\"/polityka-prywatnosci\",children:\"polityce prywatno\\u015Bci\"}),\".\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:isLoading?/*#__PURE__*/ // <Spinner>\n_jsx(SpinnerBtn,{children:/*#__PURE__*/_jsx(Spinner,{bgc:colors().grey})}):/*#__PURE__*/ // </Spinner>\n_jsx(\"input\",{type:\"submit\",value:\"Kupuj\\u0119 i p\\u0142ac\\u0119\",disabled:disabled})})]})]});}export default Form;","map":{"version":3,"sources":["/home/olakoziou/Pulpit/Code/krzys2/frontend/src/components/training/Form.js"],"names":["axios","React","useEffect","useRef","useState","Link","styled","Spinner","breakpoints","colors","Title","loadStripe","stripePromise","process","env","REACT_APP_STRIPE_PUBLIC","Box","div","FormContainer","form","sm","md","violet","grey","navy1","darkGrey","Switch","props","toggle","orange","Input","navy2","Privacy","SpinnerBtn","validEmailRegex","RegExp","Form","getFromOffset","isMounted","name","address1","address2","address3","email","nip","company","errors","state","setState","setToggle","privacy","setPrivacy","disabled","setDisabled","isLoading","setIsLoading","ref","current","handleChange","e","prev","target","id","value","length","test","validateForm","valid","Object","values","forEach","val","slice","toggleSwitch","acceptPrivacy","handleSubmit","preventDefault","data","all","post","REACT_APP_DOMAIN","get","then","stripe","redirectToCheckout","sessionId","errorStripe","console","log"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Spinner from '../Spinner';\nimport { breakpoints, colors } from '../../styles';\nimport Title from '../Title';\nimport { loadStripe } from '@stripe/stripe-js';\nconst stripePromise = loadStripe(process.env.REACT_APP_STRIPE_PUBLIC);\n\nconst Box = styled.div`\n  padding: 50px 0 30px;\n`;\n\nconst FormContainer = styled.form`\n  width: 90%;\n  margin: 0 auto;\n  padding: 30px 0;\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n\n  @media ${breakpoints().sm} {\n    max-width: 350px;\n  }\n\n  @media ${breakpoints().md} {\n    max-width: 450px;\n  }\n\n  > div:last-of-type {\n    width: 100%;\n    max-width: 300px;\n    margin: 30px auto 0;\n    input[type='submit'] {\n      outline: none;\n      border: none;\n      width: 100%;\n\n      background-color: ${colors().violet};\n      color: ${colors().grey};\n      font-size: 26px;\n      font-weight: 700;\n      text-align: center;\n      text-transform: uppercase;\n      padding: 15px;\n      border-radius: 12px;\n      box-shadow: 0 0 12px -5px ${colors().navy1};\n      cursor: pointer;\n      transition: all 0.2s;\n\n      @media (hover: hover) {\n        &:not(:disabled):hover {\n          transform: scale(1.03);\n          box-shadow: 0 0 15px -5px ${colors().navy1};\n        }\n      }\n\n      &:disabled {\n        background-color: ${colors(0.5).darkGrey};\n        cursor: unset;\n      }\n    }\n  }\n`;\n\nconst Switch = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 10px 0;\n\n  > span {\n    display: inline-block;\n    max-width: 30%;\n    color: ${colors().navy1};\n    i {\n      opacity: ${(props) => (props.toggle ? '1' : '0')};\n      color: ${colors().orange};\n      transition: all 0.2s;\n    }\n  }\n  label {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n    margin-right: 5px;\n    input {\n      opacity: 0;\n      width: 0;\n      height: 0;\n    }\n\n    span {\n      position: absolute;\n      cursor: pointer;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      border-radius: 34px;\n      background-color: #ccc;\n      -webkit-transition: 0.4s;\n      transition: 0.4s;\n\n      &::before {\n        position: absolute;\n        content: '';\n        height: 26px;\n        width: 26px;\n        left: 4px;\n        bottom: 4px;\n        background-color: ${(props) =>\n          props.toggle ? `${colors().orange}` : `${colors().violet}`};\n        transform: ${(props) =>\n          props.toggle ? 'translateX(26px)' : 'translateX(0)'};\n        border-radius: 50%;\n        -webkit-transition: 0.4s;\n        transition: 0.4s;\n      }\n    }\n  }\n`;\n\nconst Input = styled.div`\n  margin: 20px 0;\n  height: 50px;\n  position: relative;\n  display: flex;\n  align-items: center;\n  input {\n    height: 100%;\n    width: 100%;\n    background-color: transparent;\n    border-bottom: 1px solid ${colors().navy2};\n    outline: none;\n\n    :focus,\n    :valid {\n      border-bottom: 2px solid ${colors().orange};\n    }\n\n    :focus + label {\n      top: 5%;\n      font-size: 12px;\n      /* transition: all 0.5s; */\n    }\n    :valid + label {\n      top: 5%;\n      font-size: 12px;\n    }\n\n    :valid ~ i {\n      transform: scale(1);\n    }\n  }\n\n  i {\n    transform: scale(0);\n    color: ${colors().orange};\n    transition: all 0.2s;\n  }\n\n  label {\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    transition: all 0.3s;\n  }\n\n  i {\n    position: absolute;\n    right: 0;\n  }\n`;\n\nconst Privacy = styled.div`\n  display: flex;\n  align-items: center;\n  > input {\n    margin-right: 5px;\n  }\n`;\n\nconst SpinnerBtn = styled.div`\n  background-color: ${colors().violet};\n  color: ${colors().grey};\n  font-size: 26px;\n  font-weight: 700;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px;\n  border-radius: 12px;\n  box-shadow: 0 0 12px -5px ${colors().navy1};\n  cursor: pointer;\n`;\n\nconst validEmailRegex = RegExp(\n  // eslint-disable-next-line\n  /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n);\n\nfunction Form({ getFromOffset, isMounted }) {\n  const [state, setState] = useState({\n    name: '',\n    address1: '',\n    address2: '',\n    address3: '',\n    email: '',\n    nip: '',\n    company: '',\n    errors: {\n      name: '',\n      address1: 'Minimum 8 znaków',\n      address2: 'Minimum 6 znaków',\n      address3: 'Minimum 3 znaki',\n      email: 'Nieprawidłowy email',\n      nip: 'Minimum 8 znaków',\n      company: 'Minimum 3 znaki',\n    },\n  });\n  const [toggle, setToggle] = useState(true);\n  const [privacy, setPrivacy] = useState(false);\n  const [disabled, setDisabled] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  // const [hasChanged, setHasChanged] = useState(false);\n  const ref = useRef();\n\n  useEffect(() => {\n    getFromOffset(ref.current);\n  }, [getFromOffset]);\n  const handleChange = (e) => {\n    setState((prev) => ({\n      ...prev,\n      [e.target.id]: e.target.value,\n    }));\n    // setHasChanged(true);\n\n    const { name, value } = e.target;\n    let errors = state.errors;\n\n    switch (name) {\n      case 'name':\n        errors.name = value.length < 5 ? 'Minimum 5 znaków' : '';\n        break;\n      case 'company':\n        errors.company = value.length < 3 ? 'Minimum 3 znaki' : '';\n        break;\n      case 'email':\n        errors.email = validEmailRegex.test(value) ? '' : 'Nieprawidłowy email';\n        break;\n      case 'address1':\n        errors.address1 = value.length < 8 ? 'Minimum 8 znaków' : '';\n        break;\n      case 'address2':\n        errors.address2 = value.length < 5 ? 'Minimum 5 znaków' : '';\n        break;\n      case 'address3':\n        errors.address3 = value.length < 3 ? 'Minimum 3 znaki' : '';\n        break;\n      case 'nip':\n        errors.nip = value.length < 8 ? 'Minimum 8 znaków' : '';\n        break;\n      default:\n        break;\n    }\n    if (validateForm(state.errors)) {\n      setDisabled(false);\n    } else {\n      setDisabled(true);\n    }\n  };\n\n  const validateForm = (errors) => {\n    let valid = true;\n    Object.values(errors).forEach((val) => val.length > 0 && (valid = false)) &&\n      Object.values(state)\n        .slice(-1)\n        .forEach((val) => val.length > 0 && (valid = false));\n    return valid;\n  };\n\n  const toggleSwitch = (e) => {\n    setToggle((prev) => !prev);\n    setState({\n      name: '',\n      address1: '',\n      address2: '',\n      address3: '',\n      email: '',\n      nip: '',\n      company: '',\n      errors: {\n        name: '',\n        address1: '',\n        address2: '',\n        address3: '',\n        email: '',\n        nip: '',\n        company: '',\n      },\n    });\n  };\n\n  const acceptPrivacy = (e) => {\n    setPrivacy((prev) => !prev);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    const data = state;\n    delete data.errors;\n    await axios.all([\n      axios.post(`${process.env.REACT_APP_DOMAIN}/api/send-email`, {\n        data,\n      }),\n      axios.get('/api/kup-szkolenie').then(async (data) => {\n        const id = await data.data.id;\n        const stripe = await stripePromise;\n        const { errorStripe } = await stripe.redirectToCheckout({\n          sessionId: id,\n        });\n        console.log(errorStripe);\n      }),\n    ]);\n  };\n\n  return (\n    <Box ref={ref}>\n      <Title text=\"Dane kontaktowe\" />\n      <FormContainer\n        onSubmit={handleSubmit}\n        // action=\"/api/kup-szkolenie\"\n        // method=\"POST\"\n      >\n        <Switch toggle={toggle}>\n          {/* <span>Osoba prywatna</span> */}\n          <label>\n            <input\n              type=\"checkbox\"\n              name=\"switch\"\n              id=\"switch\"\n              onChange={toggleSwitch}\n              checked={toggle}\n            />\n            <span></span>\n          </label>\n          <span>\n            Firma <i className=\"fa fa-check\"></i>\n          </span>\n        </Switch>\n        {toggle ? (\n          <Input>\n            <input\n              type=\"text\"\n              name=\"company\"\n              id=\"company\"\n              value={state.company}\n              onChange={handleChange}\n              required\n            />\n            <label htmlFor=\"company\">Nazwa firmy</label>\n            <i className=\"fa fa-check\"></i>\n          </Input>\n        ) : (\n          <Input>\n            <input\n              type=\"text\"\n              name=\"name\"\n              id=\"name\"\n              value={state.name}\n              onChange={handleChange}\n              required\n            />\n            <label htmlFor=\"name\">Imię i nazwisko</label>\n            <i className=\"fa fa-check\"></i>\n          </Input>\n        )}\n        <Input>\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            value={state.email}\n            onChange={handleChange}\n            required\n          />\n          <label htmlFor=\"email\">Email</label>\n          <i className=\"fa fa-check\"></i>\n        </Input>\n        <Input>\n          <input\n            type=\"text\"\n            name=\"address1\"\n            id=\"address1\"\n            value={state.address1}\n            onChange={handleChange}\n            required\n          />\n          <label htmlFor=\"address1\">Ulica, nr budynku / nr lokalu</label>\n          <i className=\"fa fa-check\"></i>\n        </Input>\n        <Input>\n          <input\n            type=\"text\"\n            name=\"address2\"\n            id=\"address2\"\n            value={state.address2}\n            onChange={handleChange}\n            required\n          />\n          <label htmlFor=\"address2\">Kod poczowy</label>\n          <i className=\"fa fa-check\"></i>\n        </Input>\n        <Input>\n          <input\n            type=\"text\"\n            name=\"address3\"\n            id=\"address3\"\n            value={state.address3}\n            onChange={handleChange}\n            required\n          />\n          <label htmlFor=\"address3\">Miejscowość</label>\n          <i className=\"fa fa-check\"></i>\n        </Input>\n        {toggle ? (\n          <Input>\n            <input\n              type=\"number\"\n              name=\"nip\"\n              id=\"nip\"\n              value={state.nip}\n              onChange={handleChange}\n              required\n            />\n            <label htmlFor=\"nip\">NIP</label>\n            <i className=\"fa fa-check\"></i>\n          </Input>\n        ) : null}\n        <Privacy>\n          <input\n            type=\"checkbox\"\n            name=\"check\"\n            checked={privacy}\n            onChange={acceptPrivacy}\n            required\n          />\n          <label htmlFor=\"check\">\n            {' '}\n            Kupując szkolenie wyrażam zgodę na przetwarzanie moich danych\n            osobowych.Zasady przetwarzania danych osobowych znajdziesz w{' '}\n            <Link to=\"/polityka-prywatnosci\">polityce prywatności</Link>.\n          </label>\n        </Privacy>\n        <div>\n          {isLoading ? (\n            // <Spinner>\n            <SpinnerBtn>\n              <Spinner bgc={colors().grey} />\n            </SpinnerBtn>\n          ) : (\n            // </Spinner>\n            <input type=\"submit\" value=\"Kupuję i płacę\" disabled={disabled} />\n          )}\n        </div>\n      </FormContainer>\n    </Box>\n  );\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}